(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{202:function(e,t,n){},245:function(e,t,n){},246:function(e,t,n){},393:function(e,t,n){},394:function(e,t,n){},395:function(e,t,n){},396:function(e,t,n){},397:function(e,t,n){},398:function(e,t,n){"use strict";n.r(t);var s,c=n(0),a=n(77),r=n.n(a),i=n(79),o=n(6),j=n(14),l=(n(202),n(1)),u=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),n=t[0],s=t[1];return Object(l.jsxs)("div",{className:"joinOuterContainer",children:[Object(l.jsx)("h2",{children:"Login panel de control de vuelos"}),Object(l.jsx)("div",{children:Object(l.jsx)("input",{className:"nameInput",placeholder:"Escribe tu nombre...",type:"text",onChange:function(e){return s(e.target.value)}})}),Object(l.jsx)(i.b,{to:"/chat?name=".concat(n),children:Object(l.jsx)("button",{className:"submitButton",type:"submit",children:"Entrar"})})]})},b=n(119),h=n(21),d=n(183),O=n.n(d),m=n(184),g=(n(245),n(246),n(400)),p=n(404),x=n(401),f=n(402),v=n(403),N=function(e){var t=e.flights,n=e.positions,s=["red","blue","green","yellow","orange","purple","brown"];return t&&Object.keys(n).length>=t.length?Object(l.jsx)("div",{id:"mapOuterContainer",children:Object(l.jsxs)(g.a,{center:[-33.53,-69.48],zoom:5,scrollWheelZoom:!1,children:[Object(l.jsx)(p.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.map((function(e,t){return Object(l.jsx)(x.a,{color:s[Math.floor(Math.random()*s.length)],dashArray:"5, 5",positions:[e.origin,e.destination]},t)})),Object.keys(n).map((function(e,t){return Object(l.jsx)(x.a,{color:"white",positions:n[e]},t)})),t.map((function(e,t){return Object(l.jsx)(f.a,{position:n[e.code][n[e.code].length-1],children:Object(l.jsx)(v.a,{direction:"top",opacity:1,offset:[-15,-5],children:e.code})},t)}))]})}):Object(l.jsx)("h4",{children:"Cargando mapa..."})},C=n(197),M=(n(393),n(394),function(e){var t=e.message,n=new Date(t.date);return Object(l.jsxs)("div",{className:"messageOuterContainer",children:[Object(l.jsxs)("div",{className:"messageInfo",children:[Object(l.jsx)("p",{className:"nameParagraph",children:t.name})," ",Object(l.jsxs)("p",{className:"dateParagraph",children:[", ",n.getDate(),"/",n.getMonth(),", ",n.getHours(),":",n.getMinutes()]})]}),Object(l.jsx)("div",{className:"textContainer",children:Object(l.jsx)("p",{className:"messageParagraph",children:t.message})})]})}),y=(n(395),function(e){var t=e.setMessage,n=e.sendMessage,s=e.message;return Object(l.jsxs)("div",{className:"inputOuterContainer",children:[Object(l.jsx)("input",{className:"input",type:"text",placeholder:"Escribe un mensaje...",value:s,onChange:function(e){var n=e.target.value;return t(n)}}),Object(l.jsx)("button",{className:"sendButton",onClick:function(){return n()},children:"Enviar"})]})}),S=function(e){var t=e.messages,n=e.setMessage,s=e.sendMessage,c=e.message;return Object(l.jsxs)("div",{className:"chatOuterContainer",children:[Object(l.jsx)(C.a,{className:"messages",children:t.map((function(e,t){return Object(l.jsx)("div",{children:Object(l.jsx)(M,{message:e})},t)}))}),Object(l.jsx)("div",{className:"input",children:Object(l.jsx)(y,{setMessage:n,sendMessage:s,message:c})})]})},w=(n(396),n(397),function(e){var t=e.flight;return Object(l.jsxs)("div",{className:"flightOuterContainer",children:[Object(l.jsx)("p",{children:Object(l.jsxs)("b",{children:[t.airline," - ",t.code]})}),Object(l.jsx)("p",{children:"Pasajeros:"}),Object(l.jsx)("ul",{className:"passengers",children:t.passengers.map((function(e,t){return Object(l.jsxs)("li",{children:[" ",e.name," (age ",e.age,") "]},t)}))})]})}),I=function(e){var t=e.flights,n=e.updateFlights;return Object(l.jsxs)("div",{className:"flightsInfoOuterContainer",children:[Object(l.jsxs)("button",{className:"updateFlightsButton",onClick:function(){return n()},children:["Recargar",Object(l.jsx)("br",{}),"vuelos"]}),Object(l.jsx)("div",{className:"flights",children:t.map((function(e,t){return Object(l.jsx)(w,{flight:e},t)}))})]})},k=function(e){var t=e.location,n=Object(c.useState)(""),a=Object(j.a)(n,2),r=a[0],i=a[1],o=Object(c.useState)([]),u=Object(j.a)(o,2),d=u[0],g=u[1],p=Object(c.useState)([]),x=Object(j.a)(p,2),f=x[0],v=x[1],C=Object(c.useState)(""),M=Object(j.a)(C,2),y=M[0],w=M[1],k=Object(c.useState)({}),F=Object(j.a)(k,2),H=F[0],P=F[1];Object(c.useEffect)((function(){var e=O.a.parse(t.search).name;s=Object(m.io)("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),i(e),s.emit("FLIGHTS"),s.on("POSITION",(function(e){!function(e){var t=e.code,n=e.position;P((function(e){var s=Object(h.a)({},e);if(t in e){var c=[].concat(Object(b.a)(e[t]),[n]);return s[t]=c,s}var a=new Array;return a[0]=n,s[t]=a,s}))}(e)})),s.on("FLIGHTS",(function(e){g(e)})),s.on("CHAT",(function(e){v((function(t){return[].concat(Object(b.a)(t),[e])}))}))}),[]);return Object(l.jsxs)("div",{className:"outerContainer",children:[Object(l.jsx)("h1",{children:"Panel de control"}),Object(l.jsxs)("div",{className:"columnsContainer",children:[Object(l.jsxs)("div",{className:"firstColumn",children:[Object(l.jsx)("h3",{children:"Mapa"}),Object(l.jsx)(N,{flights:d,positions:H})]}),Object(l.jsxs)("div",{className:"secondColumn",children:[Object(l.jsx)("h3",{children:"Chat"}),Object(l.jsx)(S,{messages:f,setMessage:w,sendMessage:function(){y&&s.emit("CHAT",{name:r,message:y},(function(){return w("")}))},message:y})]})]}),Object(l.jsxs)("div",{className:"flightsContainer",children:[Object(l.jsx)("h3",{children:"Informaci\xf3n de vuelos"}),Object(l.jsx)(I,{flights:d,updateFlights:function(){s.emit("FLIGHTS")}})]})]})},F=function(){return Object(l.jsxs)(i.a,{children:[Object(l.jsx)(o.a,{path:"/",exact:!0,component:u}),Object(l.jsx)(o.a,{path:"/chat",component:k})]})};r.a.render(Object(l.jsx)(F,{}),document.querySelector("#root"))}},[[398,1,2]]]);
//# sourceMappingURL=main.c9fa5050.chunk.js.map